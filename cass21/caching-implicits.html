<html><head><title>scala-cass: Caching Implicits</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Thurston Sandberg" /><meta name="description" content="Java Cassandra Driver Bindings for Friendlier Scala" /><meta name="og:image" content="/scala-cass/img/poster.png" /><meta name="og:title" content="scala-cass: Caching Implicits" /><meta name="og:site_name" content="scala-cass" /><meta name="og:url" content="" /><meta name="og:type" content="website" /><meta name="og:description" content="Java Cassandra Driver Bindings for Friendlier Scala" /><link rel="icon" type="image/png" href="/scala-cass/img/favicon.png" /><meta name="twitter:title" content="scala-cass: Caching Implicits" /><meta name="twitter:image" content="img/poster.png" /><meta name="twitter:description" content="Java Cassandra Driver Bindings for Friendlier Scala" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/scala-cass/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/scala-cass/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/scala-cass/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/scala-cass/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/scala-cass/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/scala-cass/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/scala-cass/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/scala-cass/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/scala-cass/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/scala-cass/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/scala-cass/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/scala-cass/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/scala-cass/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/scala-cass/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/scala-cass/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/scala-cass/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/scala-cass/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/scala-cass/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/scala-cass/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/scala-cass/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/scala-cass/highlight/styles/docco.css" /><link rel="stylesheet" href="/scala-cass/css/style.css" /><link rel="stylesheet" href="/scala-cass/css/palette.css" /><link rel="stylesheet" href="/scala-cass/css/codemirror.css" /><link rel="stylesheet" href="/scala-cass/css/override.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/scala-cass/" class="brand"><div class="brand-wrapper"><span>scala-cass</span></div></a></li>        <li><a href="/scala-cass/cassandra-21.html" class="">Cassandra 2.1</a></li> <li><a href="/scala-cass/cass21/scalasession/getting-started.html" class="">ScalaSession</a> <ul class="sub_section"> <li><a href="/scala-cass/cass21/scalasession/getting-started.html" class="">Getting Started</a></li> <li><a href="/scala-cass/cass21/scalasession/create-table.html" class="">Creating a Table</a></li> <li><a href="/scala-cass/cass21/scalasession/insert.html" class="">Insert</a></li> <li><a href="/scala-cass/cass21/scalasession/update.html" class="">Update</a></li> <li><a href="/scala-cass/cass21/scalasession/delete.html" class="">Delete</a></li> <li><a href="/scala-cass/cass21/scalasession/select.html" class="">Select</a></li> <li><a href="/scala-cass/cass21/scalasession/batch.html" class="">Batch</a></li> <li><a href="/scala-cass/cass21/scalasession/raw.html" class="">Raw Statements</a></li></ul></li> <li><a href="/scala-cass/cass21/row-extraction.html" class="">Row Extraction</a></li> <li><a href="/scala-cass/cass21/type-mappings.html" class="">Type Mappings</a></li> <li><a href="/scala-cass/cass21/date-codecs.html" class="">Date Codecs</a></li> <li><a href="/scala-cass/cass21/custom-encoders-decoders.html" class="">Custom Encoders/Decoders</a></li> <li><a href="/scala-cass/cass21/caching-implicits.html" class=" active ">Caching Implicits</a></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/thurstonsand/scala-cass"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/thurstonsand/scala-cass"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li></ul></div></div></div></div><div id="content" data-github-owner="thurstonsand" data-github-repo="scala-cass"><div class="content-wrapper"><section><h1 id="caching-implicits">Caching Implicits</h1>

<p>When deriving the encoders and decoders to your case classes, the library is built to be able to automatically resolve
the implicit <code class="highlighter-rouge">CCCassFormatEncoder</code>/<code class="highlighter-rouge">CCCassFormatDecoder</code>. This will work fine, but if you are using these 
encoders/decoders often, it may be worth it to cache them so that they do not have to be built at every call site. The
best and easiest way to do this is to derive these implicits in the companion object to your case classes, as follows:</p>

<p>(quick note: the <code class="highlighter-rouge">ImplicitCaching</code> object is a workaround for the compilation of these docs. It is unnecessary to wrap
your case class/companion object definition in code)</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="k">object</span> <span class="nc">ImplicitCaching</span> <span class="o">{</span>
     <span class="o">|</span>   <span class="k">case</span> <span class="k">class</span> <span class="nc">Query</span><span class="o">(</span><span class="n">s</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>
     <span class="o">|</span>   <span class="k">object</span> <span class="nc">Query</span> <span class="o">{</span>
     <span class="o">|</span>     <span class="k">implicit</span> <span class="k">val</span> <span class="n">encoder</span><span class="k">:</span> <span class="kt">CCCassFormatEncoder</span><span class="o">[</span><span class="kt">Query</span><span class="o">]</span> <span class="k">=</span> <span class="nc">CCCassFormatEncoder</span><span class="o">.</span><span class="n">derive</span>
     <span class="o">|</span>     <span class="k">implicit</span> <span class="k">val</span> <span class="n">decoder</span><span class="k">:</span> <span class="kt">CCCassFormatDecoder</span><span class="o">[</span><span class="kt">Query</span><span class="o">]</span> <span class="k">=</span> <span class="nc">CCCassFormatDecoder</span><span class="o">.</span><span class="n">derive</span>
     <span class="o">|</span>   <span class="o">}</span>
     <span class="o">|</span> <span class="o">}</span>
<span class="n">defined</span> <span class="k">object</span> <span class="nc">ImplicitCaching</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">sSession</span><span class="o">.</span><span class="n">selectStar</span><span class="o">(</span><span class="s">"mytable"</span><span class="o">,</span> <span class="nc">ImplicitCaching</span><span class="o">.</span><span class="nc">Query</span><span class="o">(</span><span class="s">"a str"</span><span class="o">)).</span><span class="n">execute</span><span class="o">()</span>
<span class="n">res3</span><span class="k">:</span> <span class="kt">com.weather.scalacass.Result</span><span class="o">[</span><span class="kt">Iterator</span><span class="o">[</span><span class="kt">com.datastax.driver.core.Row</span><span class="o">]]</span> <span class="k">=</span> <span class="nc">Right</span><span class="o">(</span><span class="n">non</span><span class="o">-</span><span class="n">empty</span> <span class="n">iterator</span><span class="o">)</span>
</code></pre></div></div>

<p>the <code class="highlighter-rouge">derive</code> function will implicitly create the encoder/decoder in the companion object, and now at every call site,
this implicit is used instead of one that would be built by the library.</p>

</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/scala-cass/highlight/highlight.pack.js"></script><script>hljs.configure({
languages:['scala','java','bash']
});
hljs.initHighlighting();
             </script><script>((window.gitter = {}).chat = {}).options = {
room: 'scala-cass/Lobby'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script><script src="/scala-cass/js/main.js"></script></body></html>